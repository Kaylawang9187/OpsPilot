version: "3.1"

nlu:
  - regex: reboot_server
    examples: |
      - (?:(?:1[0-9][0-9]\.)|(?:2[0-4][0-9]\.)|(?:25[0-5]\.)|(?:[1-9][0-9]\.)|(?:[0-9]\.)){3}(?:(?:1[0-9][0-9])|(?:2[0-4][0-9])|(?:25[0-5])|(?:[1-9][0-9])|(?:[0-9]))

  - intent: reboot_device
    examples: |
      - 重启[10.11.25.48](reboot_server)服务器
      - 我需要重启[10.11.25.48](reboot_server)服务器
      - 帮我重启[10.11.25.48](reboot_server)服务器
      - 我想重启[10.11.25.48](reboot_server)服务器
      - 重启[10.11.25.48](reboot_server)一下服务器
      - 能否请你重启[10.11.25.48](reboot_server)服务器
      - 重启[10.11.25.48](reboot_server)一下机器
      - 我需要重启[10.11.25.48](reboot_server)一下机器
      - 能否请你重启[10.11.25.48](reboot_server)一下机器
      - 请帮我重启[10.11.25.48](reboot_server)服务器
      - 请帮我重启[10.11.25.48](reboot_server)一下机器
      - 我打算重启[10.11.25.48](reboot_server)服务器
      - 请帮忙重启[10.11.25.48](reboot_server)服务器
      - 帮忙重启[10.11.25.48](reboot_server)一下机器
      - 可以帮我重启[10.11.25.48](reboot_server)服务器吗
      - 可以重启[10.11.25.48](reboot_server)服务器吗
      - 可以重启[10.11.25.48](reboot_server)一下服务器吗
      - 帮我重新启动服务器
      - 重新启动一下服务器
      - 请重新启动服务器
      - 请重新启动一下服务器
      - 能否请你重新启动服务器
      - 能否请你重新启动一下服务器

responses:
  utter_ask_reboot_server:
    - text: "你想重启哪台服务器呢？"

  utter_ask_sure_restart_server:
    - text: "请确认是否需要重启[{reboot_server}]服务器"

  utter_sure_restart_server:
    - text: "是否需要重启[{reboot_server}]服务器？"
      buttons:
        - title: "确认"
          payload: /affirm
        - title: "取消"
          payload: /deny

stories:
  - story: 重启服务器
    steps:
      - intent: reboot_device

      - action: reboot_server_form
      - active_loop: reboot_server_form
      - active_loop: null
      - slot_was_set:
          - requested_slot: null

      - action: utter_sure_restart_server
      - or:
          - intent: affirm
          - intent: deny
      - action: action_reboot_server